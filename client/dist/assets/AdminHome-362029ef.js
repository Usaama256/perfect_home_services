import{e as y,j as e,p as C,a8 as s,a as n,P as g,h as u,u as w,ak as T,E as A,T as f,aT as P,ar as I,G as k,B as j,D as q,b as z,r as h,X as B,aU as D,aV as E}from"./index-559316ce.js";import{I as N,f as O,S as R}from"./formatNumber-ad6ee0d3.js";import{C as v}from"./Card-2c90ac9f.js";import{C as H,a as $}from"./CardHeader-648a1719.js";import{T as G,a as M,b as x,c as l,d as V}from"./TableRow-2f33760f.js";import{C as S}from"./Chip-c953b218.js";import{A as W}from"./ArrowForwardIos-4cdddd19.js";import{C as J}from"./Container-49e24797.js";import{G as c}from"./Grid-2fa76f59.js";const U=y(e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"}),"MonetizationOnOutlined"),F=C("div")(({theme:r})=>({margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:r.spacing(8),height:r.spacing(8),justifyContent:"center",marginBottom:r.spacing(3)}));p.propTypes={color:s.string,icon:s.string,title:s.string.isRequired,total:s.number.isRequired,sx:s.object};function p({title:r,total:o,icon:d,color:i="primary",sx:m,...a}){return n(v,{sx:{py:5,boxShadow:0,textAlign:"center",color:t=>t.palette[i].darker,bgcolor:t=>t.palette[i].lighter,...m},...a,children:[e(F,{sx:{color:t=>t.palette[i].dark,backgroundImage:t=>`linear-gradient(135deg, ${g(t.palette[i].dark,0)} 0%, ${g(t.palette[i].dark,.24)} 100%)`},children:e(N,{sx:{width:"24",height:"24"},children:d})}),e(u,{variant:"h3",children:O(o)}),e(u,{variant:"subtitle2",sx:{opacity:.72},children:r})]})}const b=({sps:r,sx:o})=>{const d=w(),i=a=>{window.open(`tel:${a}`)},m=a=>{window.open(`mailto:${a}`)};return n(v,{sx:o,children:[e(H,{title:"Pending Service Provider Activations"}),e("br",{}),e(T,{sx:{flexGrow:1},children:e(A,{sx:{minWidth:800},children:n(G,{children:[e(M,{children:n(x,{children:[e(l,{children:"Company Name"}),e(l,{children:"Contacts"}),e(l,{sortDirection:"desc",children:"Submission Date"})]})}),e(V,{children:r==null?void 0:r.map((a,t)=>n(x,{hover:!0,sx:{cursor:"pointer"},onClick:()=>d(`/admin/dash/sps/${a.SPid}`),children:[e(l,{children:a.SPname}),n(l,{children:[e(f,{title:"Send Email",arrow:!0,children:e(S,{label:a.email,color:"info",onClick:()=>m(a.email),variant:"outlined"})}),"â€‚",e(f,{title:"Call Client",arrow:!0,children:e(S,{label:a.contact,color:"info",onClick:()=>i(a.contact),variant:"outlined"})})]}),n(l,{children:[P(a.updatedAt)," (",I(a.updatedAt),")"]})]},t))})]})})}),e(k,{}),e($,{sx:{justifyContent:"flex-end"},children:e(j,{color:"inherit",endIcon:e(q,{fontSize:"small",children:e(W,{})}),size:"small",variant:"text",children:"View all"})})]})};b.proptotype={orders:s.array,sx:s.object};const ae=()=>{const{sps:r}=z(t=>t.adminData),[o,d]=h.useState(null),[i,m]=h.useState({SPs:0,users:0});h.useEffect(()=>{a()},[]),h.useEffect(()=>{r&&d(r.filter(t=>parseInt(t.approved,10)===0))},[r]);const a=async()=>{try{const t=await B.get("/admin.api/gettotals");if(t.status===200){if(JSON.stringify(t.data)===JSON.stringify(i))return;m(t.data)}}catch(t){console.log(t),t.response?console.log(t.response,t.message):t.request?t.request.status?console.error(t.message,t.request):console.log(t.request,t.message):console.log(t.message)}};return h.useEffect(()=>{window.scrollTo(0,0)},[]),n(J,{maxWidth:"xl",children:[e(u,{variant:"h4",sx:{mb:5},children:"Dashboard"}),n(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:12,sm:6,md:3,children:e(p,{title:"Monthly Sales",total:0,icon:e(U,{})})}),e(c,{item:!0,xs:12,sm:6,md:3,children:e(p,{title:"Service Providers",total:i.SPs,icon:e(D,{})})}),e(c,{item:!0,xs:12,sm:6,md:3,children:e(p,{title:"Users",total:i.users,icon:e(E,{})})}),e(c,{item:!0,xs:12,sm:6,md:3,children:e(p,{title:"App Rating",total:3.9,icon:e(R,{})})}),o&&e(c,{item:!0,xs:12,md:12,lg:12,children:e(b,{sps:o})})]})]})};export{ae as default};
